<!DOCTYPE html>
<html>
<head>
  <title>TheatreX</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body class="body" data-no-turbolink>

<%= yield %>

  <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
  <script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
    e=o.createElement(i);r=o.getElementsByTagName(i)[0];
    e.src='https://www.google-analytics.com/analytics.js';
    r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-XXXXX-X','auto');ga('send','pageview');
  </script>

  <script>

    $(".js-scroll-link").click( function( event ){
      event.preventDefault();

      $(".section").removeClass("fadeOut");
      var targetId = "#" + $(this).data("target");
      // $(".section").removeClass("fadeOut").not( targetId ).addClass("fadeOut");
      var $fadingSections = $(".section").not( targetId );

      $fadingSections.addClass("fadeOut");

      // $fadingSections[0].addEventListener("animationend", function(){
      $fadingSections.eq(0).one("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd Animationend", {},
        function( event ){
          console.log("animationend");
          $(".section").removeClass("fadeOut")
        }, false);

      $('html, body').animate({
          scrollTop: $( targetId ).offset().top
       },
       500,
       "swing",
       function(){
       });
    });

  </script>

</body>
</html>
